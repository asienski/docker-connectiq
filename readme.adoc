
ifdef::env-github[]
image:https://github.com/kalemena/docker-connectiq/workflows/Pipeline/badge.svg[GitHub Build]
image:https://images.microbadger.com/badges/version/kalemena/connectiq.svg[Docker Version, link=https://microbadger.com/images/kalemena/connectiq]
image:https://images.microbadger.com/badges/image/kalemena/connectiq.svg[Docker Hub, link=https://hub.docker.com/r/kalemena/connectiq/tags]
endif::[]

ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

= docker-connectiq

Installation of Garmin Tools Connect IQ SDK and Eclipse IDE plugins as a Docker container.

Docker image is available through docker hub as link:https://hub.docker.com/r/kalemena/connectiq[kalemena/connectiq]

== Usage

=== Docker Image pull / build / run

.Pull or Build or Run the docker image:
====
    $ make pull
    or
    $ make build
    or
    $ make console
====

[TIP]
====
Running *run.sh* (or command line *make console*, or *make eclipse*) will map current folder into */workspace* of the container instance. +
For persistence reasons, any file or created project should be done in */workspace* folder.
====

.Generate a certificate
====
    $ make console
    $$ cd /workspace
    $$ ./generate-certificate.sh    
====

=== Building app in Console

.Building a sample app:
====
    $ make console
    $$ cd /opt/ciq/samples/Drawable/
    $$ monkeyc -d vivoactive3 -f ./monkey.jungle -o drawable.prg -y /workspace/developer_key.der
    $$ connectiq &
    $$ monkeydo drawable.prg vivoactive3

.Result of above commands
image:res/Drawable.png[Sample app Drawable]
====

=== Building app in Eclipse IDE

.Building app in Eclipse IDE
====
    $ make eclipse

.Keep default workspace location
image:res/eclipse-workspace.png[]

.Menu File => Import => Existing Projects into Workspace
image:res/eclipse-import-project.png[]

.Imported Project
image:res/eclipse-Drawable-project.png[]

.Launch Configuration
image:res/eclipse-launch-config.png[]

.Result of above commands
image:res/Drawable.png[Sample app Drawable]
====

=== Authoring app in Eclipse IDE

.Authoring a sample app:
====
    $ make eclipse

* In Eclipse, Menu File => New => Project => Connect IQ Project
* Make sure to create project under */workspace/...* hierarchy
* Then select *Widget* and *Next*
* Then for example, *Vivoactive 3* as target
* Then for example, *Sensor* or *Sensor History* as features
* Once project is loaded, you can run like previous example to see the *monkey* default app display
====

=== Upload to Watch

.Uploading to watch
====

* On Ubuntu OS
* Connect the watch using original cable
* Wait for about 30s
* Watch screen should show it is mounted and charging
* In File explorer, see *GARMIN* device and browse to *GARMIN/apps*
* Copy *PRG* file built into this folder
* Unmount *GARMIN* icon on watch
* Watch should be showing *Verifying Connect IQ Apps*
* Swipe up or down, the app should be visible
====

= Links

* link:https://developer.garmin.com/connect-iq/programmers-guide/getting-started[Getting Started]
* link:http://starttorun.info/connect-iq-apps-with-source-code/[Tutorial by example]
* link:https://github.com/topics/connectiq[]
* link:https://developer.garmin.com/downloads/connect-iq/Wearable-Programming-for-the-Active-Lifestyle.pdf[Book PDF]

== Apps

* link:https://github.com/stynoo/docker-garmin-backup[]
* link:https://github.com/blaskovicz/garmin-nest-camera-control[]
* link:https://github.com/4ch1m/HueCIQ[]
* link:https://github.com/britiger/PauseTimer-connectiq[]
* link:https://github.com/bugjam/garmin-eta/tree/master/ETA[]
* link:https://github.com/JoshuaTheMiller/Multivision-Watch[]
* link:https://apps.garmin.com/fr-FR/developer/9a164185-3030-48d9-9aef-f5351abe70d8/apps[Example with source]
* link:https://github.com/tanstaaflFH/BabyLog-Feed-ConnectIQ[]
* link:https://github.com/admsteck/ConnectIQ/tree/master/simple-battery[]
* link:https://github.com/bombsimon/garmin-seaside[]
* link:https://github.com/joshsamara/SlowWatch[]
* link:https://github.com/vtrifonov-esfiddle/ConnectIQ-WatchTemperature[]

== Eclipse

* link:https://github.com/qperez/docker-eclipse-mt-jdk8[Running Eclipse from Mac]